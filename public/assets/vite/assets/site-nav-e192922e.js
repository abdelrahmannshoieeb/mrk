import{g as d}from"./_commonjsHelpers-de833af9.js";import{a as u,i as l}from"./debounce-323e2cb5.js";import{o as s}from"./animation-201fe7f0.js";import{S as m}from"./site-nav-autocomplete-df7f68f3.js";var b=u,g=l,v="Expected a function";function h(e,t,o){var n=!0,a=!0;if(typeof e!="function")throw new TypeError(v);return g(o)&&(n="leading"in o?!!o.leading:n,a="trailing"in o?!!o.trailing:a),b(e,t,{leading:n,maxWait:t,trailing:a})}var p=h;const f=d(p),y=e=>{const t=e.scrollHeight,o=e.style.transition;e.style.transition="",e.style.overflow="hidden",requestAnimationFrame(()=>{e.style.height=`${t}px`,e.style.transition=o,requestAnimationFrame(()=>{e.style.height="0px"})}),e.setAttribute("data-collapsed","true"),e.removeAttribute("data-expanded")},S=e=>{const t=e.scrollHeight;e.style.height=`${t}px`,e.addEventListener("transitionend",()=>{e.getAttribute("data-expanded")==="true"&&(e.style.height="auto",e.style.overflow="visible")},{once:!0}),e.setAttribute("data-expanded","true"),e.removeAttribute("data-collapsed")},A={showAnnouncements(e=!0){const t=document.querySelector("[data-announcements]");t&&(t.classList.toggle("announcements--closed",!e),s(()=>{t.classList.toggle("announcements--visible",e)}))},nextAnnouncement(){const e=document.querySelector("[data-announcement]:not(.announcement--hidden)");if(!e)return;fetch(e.getAttribute("data-announcement"),{method:"POST"});const t=e==null?void 0:e.nextElementSibling;if(!t){this.showAnnouncements(!1);return}e.classList.add("announcement--fade-out"),setTimeout(()=>{e.remove(),t.classList.remove("announcement--hidden"),t.classList.add("announcement--fade-out"),s(()=>{t.classList.remove("announcement--fade-out")})},300)},init(){const e=document.querySelector("[data-announcements]"),t=document.querySelector("[data-announcements-close]");!e||!t||(document.body.prepend(e),t.addEventListener("click",this.nextAnnouncement.bind(this)),s(()=>{this.showAnnouncements()}))}},E=()=>!window.matchMedia("(min-width: 790px)").matches,x=()=>!window.matchMedia("(min-width: 1205px)").matches,c=()=>{const e=document.body.hasAttribute("data-site-nav-mobile-menu-open"),t=!!document.querySelector("[data-site-nav-popover-toggled]");document.body.toggleAttribute("data-site-nav-lock-scroll",e||t)},q={init({isFramer:e=!1}={}){this.bindStickySearch(),this.bindMobileMenu(),this.setupAutocompleteSearch(),this.bindMobilePopovers(),A.init(),e&&(this.fadeInDynamicContent("site-nav"),this.fadeInDynamicContent("site-footer"))},setupAutocompleteSearch(){document.querySelectorAll("[data-nav-autocomplete-container]").forEach(t=>{new m(t)})},bindStickySearch(){const e=f(()=>{const o=window.scrollY>40;document.body.toggleAttribute("data-site-nav-scrolled",o)},20);document.addEventListener("scroll",e,{passive:!0});const t=document.querySelector("[data-site-nav-search-btn]");t==null||t.addEventListener("click",()=>{document.body.toggleAttribute("data-site-nav-search-open")})},bindMobileMenu(){const e=document.querySelector("[data-site-nav-burger]");if(!e)return;const t=(n=void 0)=>{document.body.toggleAttribute("data-site-nav-mobile-menu-open",n),c()};e.addEventListener("click",n=>{n.preventDefault(),t()}),document.querySelectorAll("[data-site-nav-sub-trigger]").forEach(n=>{n.addEventListener("click",a=>{if(!x())return;a.preventDefault();const i=n.nextElementSibling;i.hasAttribute("data-expanded")?y(i):S(i)})}),document.body.addEventListener("click",n=>{const a=n.target.closest("[data-site-nav-burger]"),i=n.target.closest("[data-site-nav-main]");a||i||t(!1)})},bindMobilePopovers(){const e=document.querySelectorAll("[data-site-nav-popover-trigger]"),t=(o,n=void 0)=>{o.toggleAttribute("data-site-nav-popover-toggled",n),c()};e.forEach(o=>{const n=o.nextElementSibling;n&&(o.addEventListener("click",a=>{E()&&(a.preventDefault(),t(n))}),document.body.addEventListener("click",a=>{const i=o.contains(a.target)||a.target===o,r=n.contains(a.target)&&a.target!==n;i||r||t(n,!1)}))})},fadeInDynamicContent(e){const t=document.querySelector(`[data-${e}]`);t&&s(()=>{t.classList.add(`${e}--loaded`)})},enableHiddenSearchMode(e){if(!e)return;new IntersectionObserver(o=>{o.forEach(n=>{const a=!n.isIntersecting&&n.boundingClientRect.top<0;document.body.setAttribute("data-site-nav-hide-search",!a)})},{root:null,threshold:[0]}).observe(e)}};export{q as S,y as c,S as e,f as t};
//# sourceMappingURL=site-nav-e192922e.js.map

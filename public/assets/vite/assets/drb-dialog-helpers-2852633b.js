import{o as l}from"./animation-201fe7f0.js";import{g as s}from"./request-8716ca80.js";const g={bindListeners(){document.addEventListener("click",t=>{const e=t.target.closest("[data-dialog-open-remote]");if(!e)return;t.preventDefault();const i=e.getAttribute("data-dialog-open-remote"),r=e.getAttribute("href")||e.getAttribute("data-remote-url"),a=e.getAttribute("data-remote-route-url"),n=!e.hasAttribute("data-remote-disable-reload"),o=e.hasAttribute("data-dialog-prevent-light-dismiss");if(!r||!i)return;if(a&&(t.ctrlKey||t.metaKey)){window.open(a,"_blank");return}const d={url:r,dialogId:i,shouldReload:n,preventLightDismiss:o,routeUrl:a};this.openRemote(d)}),window.addEventListener("popstate",t=>{var e,i;if(((e=t.state)==null?void 0:e.action)==="OPEN_DIALOG")this.openRemote({...t.state.options,routeUrl:null});else if(((i=t.state)==null?void 0:i.action)==="CLOSE_DIALOG"){const r=document.querySelector(`drb-dialog#${t.state.dialogId}`);r==null||r.close()}})},openRemote(t){const{url:e,dialogId:i,shouldReload:r=!0,preventLightDismiss:a=!1,routeUrl:n=null}=t;let o=document.querySelector(`drb-dialog#${i}`);o||(o=document.createElement("drb-dialog"),o.id=i,o.innerHTML=`
        <div slot="dialog-outer"></div>
      `,document.body.appendChild(o)),o.remoteUrl=e,o.remoteShouldReload=r,o.preventLightDismiss=a,n&&(window.history.replaceState({action:"CLOSE_DIALOG",ignoreLegacyRouterCSRF:s(),dialogId:i,title:document.title},""),window.history.pushState({action:"OPEN_DIALOG",options:t,ignoreLegacyRouterCSRF:s(),title:document.title},"",n)),o.addEventListener("drb-dialog-closed",()=>{var d;window.history.state.action==="OPEN_DIALOG"&&((d=window.history.state.options)==null?void 0:d.dialogId)===i&&window.history.back()},{once:!0}),l(()=>{o.open()})}};export{g as D};
//# sourceMappingURL=drb-dialog-helpers-2852633b.js.map

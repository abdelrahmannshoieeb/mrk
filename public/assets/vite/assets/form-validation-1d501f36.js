import{o as V}from"./animation-201fe7f0.js";import{I as G}from"./internal-tracking-53a35615.js";import{i as k}from"./feature-gates-91956f5b.js";const y={en:{required:"This field is required",email:"This field requires a valid e-mail address",number:"This field requires a number",integer:"This field requires an integer value",url:"This field requires a valid website URL",tel:"This field requires a valid telephone number",maxlength:"This fields length must be < ${1}",minlength:"This fields length must be > ${1}",min:"Minimum value for this field is ${1}",max:"Maximum value for this field is ${1}",pattern:"Please match the requested format",equals:"The two fields do not match",default:"Please enter a correct value"}};function H(t,s){for(;(t=t.parentElement)&&!t.classList.contains(s););return t}function C(t){return this.replace(/\${([^{}]*)}/g,(s,l)=>arguments[l])}function O(t){return t.pristine.self.form.querySelectorAll('input[name="'+t.getAttribute("name")+'"]:checked').length}function $(t,s){for(let l in s)l in t||(t[l]=s[l]);return t}let q={classTo:"form-group",errorClass:"has-danger",successClass:"has-success",errorTextParent:"form-group",errorTextTag:"div",errorTextClass:"text-help"};const w="pristine-error",X="input:not([type^=hidden]):not([type^=submit]), select, textarea, drb-dropdown, drb-select, drb-rich-text",j=["required","min","max","minlength","maxlength","pattern"],W=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,B=/-message(?:-([a-z]{2}(?:_[A-Z]{2})?))?/,K=["contact-info"];let g="en";const P={},m=function(t,s){s.name=t,s.priority===void 0&&(s.priority=1),P[t]=s};m("text",{fn:t=>!0,priority:0});m("required",{fn:function(t){return this.type==="radio"||this.type==="checkbox"?O(this):t!==void 0&&t.trim()!==""},priority:99,halt:!0});m("email",{fn:t=>!t||W.test(t)});m("number",{fn:t=>!t||!isNaN(parseFloat(t)),priority:2});m("integer",{fn:t=>!t||/^\d+$/.test(t)});m("minlength",{fn:(t,s)=>!t||t.length>=parseInt(s)});m("maxlength",{fn:(t,s)=>!t||t.length<=parseInt(s)});m("min",{fn:function(t,s){return!t||(this.type==="checkbox"?O(this)>=parseInt(s):parseFloat(t)>=parseFloat(s))}});m("max",{fn:function(t,s){return!t||(this.type==="checkbox"?O(this)<=parseInt(s):parseFloat(t)<=parseFloat(s))}});m("pattern",{fn:(t,s)=>{let l=s.match(new RegExp("^/(.*?)/([gimy]*)$"));return!t||new RegExp(l[1],l[2]).test(t)}});m("equals",{fn:(t,s)=>{let l=document.querySelector(s);return l&&(!t&&!l.value||l.value===t)}});function x(t,s,l){let r=this;u(t,s,l);function u(e,a,o){e.setAttribute("novalidate","true"),r.form=e,r.config=$(a||{},q),r.live=o!==!1,r.fields=Array.from(e.querySelectorAll(X)).filter(n=>!n.closest(".flatpickr-calendar")).filter(n=>!n.closest("drb-type-ahead")).map((function(n){let i=[],c={},d={};[].forEach.call(n.attributes,function(f){if(/^data-pristine-/.test(f.name)){let b=f.name.substr(14),R=b.match(B);if(R!==null){let S=R[1]===void 0?"en":R[1];d.hasOwnProperty(S)||(d[S]={}),d[S][b.slice(0,b.length-R[0].length)]=f.value;return}b==="type"&&(b=f.value),p(i,c,b,f.value)}else~j.indexOf(f.name)?p(i,c,f.name,f.value):f.name==="type"&&p(i,c,f.value)}),i.sort((f,b)=>b.priority-f.priority);const E=["DRB-RICH-TEXT"],v=n.tagName.startsWith("DRB-")&&!E.includes(n.tagName),_=~["radio","checkbox"].indexOf(n.getAttribute("type"))||n.hasAttribute("data-disable-live-validation"),F=!v&&!_;return r.live&&n.addEventListener("change",(function(f){r.validate(f.target)}).bind(r)),F&&r.live&&n.addEventListener("input",(function(f){f.target.hasAttribute("pristine-has-validated")&&r.validate(f.target)}).bind(r)),n.pristine={input:n,validators:i,params:c,messages:d,self:r}}).bind(r))}function p(e,a,o,n){let i=P[o];if(i&&(e.push(i),n)){let c=o==="pattern"?[n]:n.split(",");c.unshift(null),a[o]=c}}r.validate=function(e,a){var c,d;a=e&&a===!0||e===!0;let o=r.fields;e!==!0&&e!==!1&&(e instanceof HTMLElement?o=[e.pristine]:(e instanceof NodeList||e instanceof(window.$||Array)||e instanceof Array)&&(o=Array.from(e).map(E=>E.pristine)));let n=!0;for(let E=0;o[E];E++){let v=o[E];(c=v.input)==null||c.toggleAttribute("pristine-has-validated",!0),h(v)?!a&&I(v):(n=!1,!a&&A(v));const _=new CustomEvent("pristine:input-validated",{bubbles:!0});(d=v.input)==null||d.dispatchEvent(_)}const i=new CustomEvent("pristine:form-validated",{bubbles:!0,detail:{isValidatingEntireForm:!e}});return r.form.dispatchEvent(i),n},r.getErrors=function(e){if(!e){let a=[];for(let o=0;o<r.fields.length;o++){let n=r.fields[o];n.errors.length&&a.push({input:n.input,errors:n.errors})}return a}return e.tagName&&e.tagName.toLowerCase()==="select"?e.pristine.errors:e.length?e[0].pristine.errors:e.pristine.errors};function h(e){let a=[],o=!0;for(let n=0;e.validators[n];n++){let i=e.validators[n],c=e.params[i.name]?e.params[i.name]:[];if(e.input.tagName==="DRB-RICH-TEXT"?c[0]=K.includes(i.name)?e.input.value:e.input.textValue:c[0]=e.input.value,!i.fn.apply(e.input,c)&&(o=!1,typeof i.msg=="function"?a.push(i.msg(e.input.value,c,e.input)):typeof i.msg=="string"?a.push(C.apply(i.msg,c)):i.msg===Object(i.msg)&&i.msg[g]?a.push(C.apply(i.msg[g],c)):e.messages[g]&&e.messages[g][i.name]?a.push(C.apply(e.messages[g][i.name],c)):y[g]&&y[g][i.name]?a.push(C.apply(y[g][i.name],c)):a.push(C.apply(y[g].default,c)),i.halt===!0))break}return e.errors=a,o}r.addValidator=function(e,a,o,n,i){e instanceof HTMLElement?(e.pristine.validators.push({fn:a,msg:o,priority:n,halt:i}),e.pristine.validators.sort((c,d)=>d.priority-c.priority)):console.warn("The parameter elem must be a dom element")};function T(e){if(e.errorElements)return e.errorElements;let a=H(e.input,r.config.classTo),o=null,n=null;return r.config.classTo===r.config.errorTextParent?o=a:o=a.querySelector("."+r.config.errorTextParent),o&&(n=o.querySelector("."+w),n||(n=document.createElement(r.config.errorTextTag),n.className=w+" "+r.config.errorTextClass,o.appendChild(n),n.pristineDisplay=n.style.display)),e.errorElements=[a,n]}function A(e){let a=T(e),o=a[0],n=a[1];const{input:i}=e,d=`error-${i.id||Math.floor(new Date().valueOf()*Math.random())}`;o&&(o.classList.remove(r.config.successClass),o.classList.add(r.config.errorClass),i.setAttribute("aria-describedby",d),i.setAttribute("aria-invalid","true")),n&&(n.setAttribute("id",d),n.setAttribute("role","alert"),n.innerHTML=e.errors.join("<br/>"),n.style.display=n.pristineDisplay||"")}r.addError=function(e,a){e=e.length?e[0]:e,e.pristine.errors.push(a),A(e.pristine)};function L(e){let a=T(e),o=a[0],n=a[1];const{input:i}=e;return o&&(o.classList.remove(r.config.errorClass),o.classList.remove(r.config.successClass),i.removeAttribute("aria-describedby"),i.removeAttribute("aria-invalid")),n&&(n.removeAttribute("id"),n.removeAttribute("role"),n.innerHTML="",n.style.display="none"),a}function I(e){let a=L(e)[0];a&&a.classList.add(r.config.successClass)}return r.reset=function(){for(let e=0;r.fields[e];e++)r.fields[e].errorElements=null;Array.from(r.form.querySelectorAll("."+w)).map(function(e){e.parentNode.removeChild(e)}),Array.from(r.form.querySelectorAll("."+r.config.classTo)).map(function(e){e.classList.remove(r.config.successClass),e.classList.remove(r.config.errorClass)})},r.destroy=function(){r.reset(),r.fields.forEach(function(e){delete e.input.pristine}),r.fields=[]},r.setGlobalConfig=function(e){q=e},r}x.addValidator=function(t,s,l,r,u){m(t,{fn:s,msg:l,priority:r,halt:u})};x.addMessages=function(t,s){let l=y.hasOwnProperty(t)?y[t]:y[t]={};Object.keys(s).forEach(function(r,u){l[r]=s[r]})};x.setLocale=function(t){g=t};const M={GENERAL:"general",MESSAGE:"message",SCREENSHOT:"screenshot"},D=(t="",s)=>{var p,h,T,A,L,I,e,a,o,n;let l=M.GENERAL;typeof s=="string"?l=s:typeof s=="object"&&s instanceof HTMLElement&&(l=((p=s.closest("[data-contact-info-scope]"))==null?void 0:p.getAttribute("data-contact-info-scope"))||l);const r=((A=(T=(h=Dribbble==null?void 0:Dribbble.JsConfig)==null?void 0:h.contacts)==null?void 0:T.regexes)==null?void 0:A[l])||((e=(I=(L=Dribbble==null?void 0:Dribbble.JsConfig)==null?void 0:L.contacts)==null?void 0:I.regexes)==null?void 0:e[M.GENERAL])||[];let u;return k("disintermediation")?u=Object.values(r).map(i=>new RegExp(i,"i"))||[]:u=((n=(o=(a=Dribbble==null?void 0:Dribbble.JsConfig)==null?void 0:a.engagements)==null?void 0:o.contact_info_regexes)==null?void 0:n.map(i=>new RegExp(i,"i")))||[],u.length?u.some(i=>i.test(t)):!1},Q=(t,s)=>{t.classList.remove("animation-shake"),s&&V(()=>{t.classList.add("animation-shake")})};let N;const z=t=>{const s={location:t.getAttribute("data-contact-info-warning")||"",sender_id:t.getAttribute("data-sender-id")||"",thread_id:t.getAttribute("data-thread-id")||""};G.trackContactInfoWarningShown(s)},ee=(t,s)=>{t&&(t.classList.toggle("contact-info-warning--visible",s),s&&!N?(z(t),N=!0):s||(N=!1))},te=t=>{t&&t.addEventListener("pristine:form-validated",({detail:s})=>{var p;const{isValidatingEntireForm:l}=s,u=Array.from(t.querySelectorAll("[data-pristine-contact-info]")).some(h=>D(h.value,h));(l||!u)&&((p=t.querySelector("[data-contact-info-error]"))==null||p.toggleAttribute("hidden",!u))})},J={classTo:"js-validation-parent",errorClass:"has-validation-error",errorTextParent:"js-validation-parent",errorTextClass:"validation-error"};x.addValidator("contact-info",function(t){return k("disintermediation")?!D(t,this):!0},(t,s,l)=>{const r='<a href="https://support.dribbble.com/hc/en-us/articles/30314539301911" style="--link-color: #ea4c89; --link-decoration: underline" target="_blank">Learn more.</a>',u="Contact details or external links arenâ€™t allowed in this field. LEARN_MORE_LINK";return(l.getAttribute("data-pristine-contact-info")||u).replace("LEARN_MORE_LINK",r)},10,!1);const re=(t,s={},l=!0)=>{const r={...J,...s};return new x(t,r,l)};export{M as C,re as P,ee as a,te as b,D as h,Q as t};
//# sourceMappingURL=form-validation-1d501f36.js.map
